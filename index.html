<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Zalman Aran | Management System</title>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700;800&display=swap');
        :root { --blue: #002d5a; --accent: #ffcc00; --red: #d63031; --green: #2ecc71; }
        body { margin: 0; font-family: 'Assistant', sans-serif; background: #f0f2f5; color: #1c1e21; }
        
        header { background: white; padding: 10px 40px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .nav-bar { background: var(--blue); padding: 12px 40px; display: flex; justify-content: flex-end; gap: 25px; }
        .nav-bar a { color: white; text-decoration: none; font-size: 14px; font-weight: 600; cursor: pointer; }

        .container { max-width: 1100px; margin: 30px auto; padding: 20px; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 25px; }
        .card { background: white; border-radius: 12px; padding: 25px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.05); border: none; transition: 0.2s; cursor: pointer; }
        .card:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.1); }

        .hero { background: white; border-radius: 15px; padding: 40px; text-align: center; margin-bottom: 20px; border-bottom: 4px solid var(--blue); }
        #newsText { font-size: 18px; color: #444; }

        /* 写屑懈薪泻邪 懈 锌懈芯泻 锌芯谢蟹芯胁邪械谢械泄 */
        .admin-box { display: none; background: #fff; border-radius: 15px; padding: 25px; margin-top: 20px; border: 2px solid var(--red); }
        .user-list { width: 100%; border-collapse: collapse; margin-top: 15px; text-align: right; }
        .user-list th, .user-list td { padding: 10px; border-bottom: 1px solid #eee; font-size: 14px; }
        
        /* 效邪 */
        .chat-btn { position: fixed; left: 20px; bottom: 20px; background: var(--blue); color: white; padding: 15px 25px; border-radius: 30px; cursor: pointer; font-weight: bold; }
        .chat-win { position: fixed; left: 20px; bottom: 80px; width: 320px; height: 450px; background: white; border-radius: 15px; display: none; flex-direction: column; box-shadow: 0 10px 30px rgba(0,0,0,0.2); border: 1px solid #ddd; z-index: 100; }
        #msgs { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; background: #f8f9fa; }
        .m { padding: 10px; border-radius: 12px; font-size: 14px; max-width: 80%; }
        .m.me { background: var(--blue); color: white; align-self: flex-end; }
        .m.other { background: #e4e6eb; align-self: flex-start; }

        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: flex; align-items: center; justify-content: center; z-index: 9999; }
        .modal-c { background: white; padding: 40px; border-radius: 20px; width: 320px; text-align: center; }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .btn-main { background: var(--accent); border: none; padding: 12px 25px; border-radius: 8px; font-weight: bold; cursor: pointer; width: 100%; }
        
        .hidden { display: none; }
    </style>
</head>
<body>

  <div class="modal-c">
    <h2 style="margin-top:0">驻专  专</h2>
    <form action="小孝鞋_小挟_小小蝎校_孝_FORMSPREE_小挟" method="POST">
        <input type="text" name="name" placeholder="砖 " required style="width:100%; margin-bottom:10px; padding:8px;">
        <input type="email" name="email" placeholder="" required style="width:100%; margin-bottom:10px; padding:8px;">
        <button type="submit" class="btn-main" style="width:100%;">转专转</button>
    </form>
</div>

    <header>
        <div style="display:flex; align-items:center; gap:12px;">
            <img id="userAva" src="https://cdn-icons-png.flaticon.com/512/149/149071.png" style="width:45px; height:45px; border-radius:50%">
            <div><b id="userName">专</b><br><small id="userRole">转/</small></div>
        </div>
        <img src="https://i.ibb.co/LzXpYy4/image-a826bf.png" style="height:40px;">
    </header>

    <nav class="nav-bar">
        <a onclick="location.reload()">祝 转</a>
        <a onclick="alert('拽专')">注专转 砖注转</a>
        <a id="admLink" class="hidden" style="color:var(--accent)" onclick="toggleAdmin()">  注专转</a>
    </nav>

    <div class="container">
        <div class="grid">
            <div class="card" onclick="alert('注 砖 ')"><br><b>注 砖</b></div>
            <div class="card" onclick="alert('  注')"><br><b> </b></div>
            <div class="card" onclick="alert('注专转 转')"><br><b>注专转 砖注转</b></div>
        </div>

        <div class="hero">
            <h1 id="heroTitle">专  驻专  专</h1>
            <p id="newsText">注 注转 转 转 住驻专...</p>
            <div id="teacherTool" class="hidden" style="margin-top:20px; border-top:1px solid #eee; padding-top:20px;">
                <input type="text" id="newAnnounce" placeholder="转 注 砖 转..." style="width:70%">
                <button class="btn-main" style="width:auto" onclick="postAnnounce()">驻专住 注</button>
            </div>
        </div>

        <div id="adminPanel" class="admin-box">
            <h2 style="color:var(--red); margin-top:0;"> 砖转砖 ()</h2>
            <p> 转 专转 转   砖住 转专 砖专 转:</p>
            <table class="user-list">
                <thead>
                    <tr><th>砖</th> <th></th> <th> 住</th></tr>
                </thead>
                <tbody id="userTable"></tbody>
            </table>
            <button class="btn-main" style="margin-top:20px; background:#333; color:white" onclick="db.ref('msgs').remove()">拽 爪'</button>
        </div>
    </div>

    <div class="chat-btn" onclick="toggleChat()">爪'  </div>
    <div id="chatWin" class="chat-win">
        <div style="background:var(--blue); color:white; padding:12px; font-weight:bold; text-align:center; border-radius:15px 15px 0 0;">爪' 砖</div>
        <div id="msgs"></div>
        <div style="padding:10px; display:flex; gap:5px; border-top:1px solid #eee;">
            <input type="text" id="mInp" placeholder="注..." style="margin:0">
            <button class="btn-main" style="width:auto" onclick="send()">></button>
        </div>
    </div>

    <footer style="text-align:center; padding:30px; color:#888;">
        <span onclick="secretAccess()">漏 2026 转 住驻专  专</span>
    </footer>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAXP0On-Df7rSDMQ48LWaBrfSsBLO6WVBg",
            authDomain: "zalmanaranportal.firebaseapp.com",
            projectId: "zalmanaranportal",
            databaseURL: "https://zalmanaranportal-default-rtdb.firebaseio.com"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let me = { name: "", email: "", role: "student" };
        let clicks = 0;

        function startApp() {
            me.name = document.getElementById('inName').value;
            me.email = document.getElementById('inEmail').value;
            if(!me.name || !me.email) return alert("  驻专");

            // 1. 小蝎 鞋孝携  校 携 孝携
            db.ref('users').push().set({
                name: me.name,
                email: me.email,
                time: new Date().toLocaleString('he-IL')
            });

            document.getElementById('userName').innerText = me.name;
            document.getElementById('auth').style.display = 'none';
        }

        // 小孝蝎 啸 携 孝携  校效孝
        function secretAccess() {
            clicks++;
            if(clicks == 5) {
                const pass = prompt("住 拽 砖:");
                if(pass === "admin123") { // 孝 鞋
                    me.role = "admin";
                    document.getElementById('userRole').innerText = " 注专转";
                    document.getElementById('admLink').classList.remove('hidden');
                    alert("专 , !");
                } 
                if(pass === "teacher456") { // 鞋 携 校效孝
                    me.role = "teacher";
                    document.getElementById('userRole').innerText = "专 / 住";
                    document.getElementById('teacherTool').classList.remove('hidden');
                    alert("爪 专 驻注");
                }
                clicks = 0;
            }
        }

        // 芯谐懈泻邪 薪芯胁芯械泄 芯 懈械谢械泄
        function postAnnounce() {
            const txt = document.getElementById('newAnnounce').value;
            if(txt) db.ref('announcement').set({ text: txt, from: me.name });
        }
        db.ref('announcement').on('value', s => {
            const d = s.val();
            if(d) document.getElementById('newsText').innerText = d.text;
        });

        // 写屑懈薪泻邪: 胁胁芯写 锌懈泻邪 胁械 蟹邪械写懈
        function toggleAdmin() {
            const p = document.getElementById('adminPanel');
            p.style.display = p.style.display === 'block' ? 'none' : 'block';
            if(p.style.display === 'block') {
                db.ref('users').on('value', s => {
                    let html = "";
                    s.forEach(child => {
                        const u = child.val();
                        html += `<tr><td>${u.name}</td><td>${u.email}</td><td>${u.time}</td></tr>`;
                    });
                    document.getElementById('userTable').innerHTML = html;
                });
            }
        }

        // 效邪
        function toggleChat() { 
            const c = document.getElementById('chatWin');
            c.style.display = c.style.display === 'flex' ? 'none' : 'flex';
        }
        function send() {
            const t = document.getElementById('mInp').value;
            if(t) db.ref('msgs').push().set({ u: me.name, t: t, r: me.role });
            document.getElementById('mInp').value = "";
        }
        db.ref('msgs').limitToLast(15).on('child_added', s => {
            const d = s.val();
            const div = document.createElement('div');
            div.className = `m ${d.u === me.name ? 'me' : 'other'}`;
            div.innerHTML = `<small style="font-size:10px">${d.u} [${d.r}]</small><br>${d.t}`;
            document.getElementById('msgs').appendChild(div);
            document.getElementById('msgs').scrollTop = document.getElementById('msgs').scrollHeight;
        });
    </script>
</body>
</html>

